#pragma config(Sensor, S1,     ultra,          sensorSONAR)
#pragma config(Sensor, S4,     color1,         sensorColorNxtFULL)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#define distance 150   // money distance
#define DIAMETER 55

float convert(float dis){

	float angle;
	angle = (55/2/DIAMETER*360);
	return angle;
	
}

task main()
{
	int rotation;
	int count =0;
	
	while(1){
		
	
		if(SensorValue(ultra) < 10){
			rotation  = (int) convert((float)distance);
			nMotorEncoderTarget[motorA] = rotation;
			nMotorEncoderTarget[motorC] = rotation;
			motor[motorA] = 40;
			motor[motorC] = 40;
			
			while(nMotorEncoder[motorA] < rotation);
			
			motor[motorA] = 40;
			motor[motorC] = 40;
			wait1Msec(2000);

			
		}
		
		else if(SensorValue(ultra) >= 20){
			motor[motorA] = 0;
			motor[motorC] = 0;
		}	

			if(SensorValue(color1) == GREENCOLOR){

			
			while(SensorValue(color1) == GREENCOLOR){}
				count += 3;
				
			
			}
		
			if(SensorValue(color1) == BLUECOLOR){
				while(SensorValue(color1) == BLUECOLOR){}
				count += 1;
			
				
			}
		
			if(SensorValue(color1) == YELLOWCOLOR){
				while(SensorValue(color1) == YELLOWCOLOR){}
				count += 2
			
				
				}
				sendMessageWithParm(count);
				nxtDisplayTextLine(2,"count : %d",count);
				nxtDisplayTextLine(3,"ultra : %d",SensorValue(ultra));
				
				wait1Msec(200);
	
	}
			
			
	}